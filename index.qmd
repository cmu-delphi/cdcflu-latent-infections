---
talk-title: "Estimating latent infections"
talk-short-title: "{{< meta talk-title >}}"
talk-subtitle: "A retrospective"
author: "Ryan J. Tibshirani"
other-authors: "Daniel J. McDonald, Rachel Lobay, and CMU's Delphi Group"
repo-address: "cmu-delphi.github.io/cdcflu-latent-infections"
talk-date: "CDC Flu -- 18 December 2023"
format: revealjs
---

<!-- Set any of the above to "" to omit them -->

<!-- Or adjust the formatting in _titleslide.qmd -->
{{< include _titleslide.qmd >}}


## Goal

#### Use reported cases to estimate actual infections 

* For every US state 
* Between March 1, 2020 to January 1, 2022
* Provide an "authoritative" estimate with uncertainty
* No compartmental models, no sampling or Bayesian methods

## Retrospective deconvolution

* Based on prior work (Jahja et al. 2021)
* Take reported cases and deconvolve them to find when symptoms began
* Private CDC linelist to estimate the delay from symptom onset to case report
  - Different delay distribution for every report date and state
* Combine with Literature estimate of the delay from infection to symptom onset
  - Variant specific
  - Prevailing variant mix taken from GISAID
* Convolve both to get delay distribution from infection to case report







## Callouts

::: {.callout-note}
You can use these. See <https://quarto.org/docs/authoring/callouts.html>
:::

## Final slide {.smaller}


### Thanks:

```{r qr-codes}
#| include: false
#| fig-format: png
# Code to generate QR codes to link to any external sources
qrdat <- function(text, ecl = c("L", "M", "Q", "H")) {
  x <- qrcode::qr_code(text, ecl)
  n <- nrow(x)
  s <- seq_len(n)
  tib <- tidyr::expand_grid(x = s, y = rev(s))
  tib$z <- c(x)
  tib
}
qr1 <- qrdat("https://cmu-delphi.github.io/epiprocess/")
qr2 <- qrdat("https://cmu-delphi.github.io/epipredict/")
ggplot(qr1, aes(x, y, fill = z)) +
  geom_raster() +
  ggtitle("{epiprocess}") +
  coord_equal(expand = FALSE) +
  scale_fill_manual(values = c("white", "black"), guide = "none") +
  theme_void(base_size = 18) +
  theme(plot.title = element_text(hjust = .5))
ggplot(qr2, aes(x, y, fill = z)) +
  geom_raster() +
  labs(title = "{epipredict}") +
  coord_equal(expand = FALSE) +
  scale_fill_manual(values = c("white", "black"), guide = "none") +
  theme_void(base_size = 18) +
  theme(plot.title = element_text(hjust = .5))
```

::: flex
::: w-50
- The whole [CMU Delphi Team](https://delphi.cmu.edu/about/team/) (across many institutions)
- Optum/UnitedHealthcare, Change Healthcare.
- Google, Facebook, Amazon Web Services.
- Quidel, SafeGraph, Qualtrics.
- Centers for Disease Control and Prevention.
- Council of State and Territorial Epidemiologists
:::

::: w-50

![](gfx/qr-epiprocess.png){width="300px"}
![](gfx/qr-epipredict.png){width="300px"}

:::

:::

::: {layout-row=1 fig-align="center"}
![](gfx/delphi.jpg){height="100px"}
![](gfx/berkeley.jpg){height="100px"}
![](gfx/cmu.jpg){height="100px"}
![](gfx/ubc.jpg){width="250px"}
![](gfx/usc.jpg){width="250px"}
![](gfx/stanford.jpg){width="250px"}
:::


